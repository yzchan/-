知识点：CMOS
---

CMOS是电脑主板上的一块可读写的RAM芯片，通常用来存储时间信息和系统配置信息（BIOS设置等）。

由于RAM芯片掉电数据会丢失。所以CMOS芯片一般需要使用一颗型号为CR2032的纽扣电池给其供电，保证关机之后里面的信息不会丢失。

> CR2032:其中C表示以锂金属为负极、以二氧化锰为正极的化学电池体系，R表示电池的形状为圆柱形；20表示电池的直径是20mm，32代表电池的高度为3.2mm。CR2032是一种十分常见的型号，也常用于电子秤、计算器、汽车遥控钥匙等产品上。 

CMOS有128字节的存储单元，内部时钟使用0~0dh.其他大部分用于保存系统配置信息供BIOS读取。CMOS有两个端口，70h为地址端口，71h为数据端口。

CMOS里时间信息的存放规则：年、月、日、时、分、秒共6个信息，分别占用1个字节，存放单元是:

<!-- 秒：0  分：2  时：4  日：7  月：8  年：9 -->
| 单元 | 0  | 1 | 2  | 3 | 4 | 5 | 6 | 7 | 8 | 9 |
| --- | -  | - | -  | - | - | - | - | - | - | - |
| 信息 | 秒 |   | 分 |   |  时 |  |  | 日 | 月 | 年 |

时间信息采用BCD码的形式存储：例如31分，用BCD表示就是00110001，刚好1个字节，高4位表示3，低4位表示1


```s
# 从CMOS芯片的2号单元(分钟信息)中读取数据
mov al,2
out 70h,al
in  al,71h
```


```s
# 向CMOS芯片的2号单元(分钟信息)中写入数据
mov al,2
out 70h,al
mov al,0
out 71h,al
```